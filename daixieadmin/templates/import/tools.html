{% macro flashed_msg() %}
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, message in messages %}
        <div class="alert alert-dismissable {{ 'alert-'+category }} " >
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            {{ message }}
        </div>    
    {% endfor %}
{% endwith %}

{% endmacro %}

{% macro error(msg, class='text-danger') %}
    {% if msg %} 
    <span class="{{ class }}">
        {{ msg[0] }}
    </span> 
    {% endif %}
{% endmacro %}


{% macro nav(item, current_user) %}
<ul class="nav">
    <li class="{{ 'active' if item=='user' }}">
    <a href="{{ url_for('user.home') }}">主页</a> 
    </li>
</ul>
{% endmacro %}

{% macro order_status(order) %}
    {% if order.status == 0 %}
       未付款
       {% elif order.status == 1%}
       已付款
       {% elif order.status == 2%}
       解答中
       {% elif order.status == 3 %}
       已解决
    {% endif %}
{% endmacro %}

{% macro captcha(form) %}
<img class="captcha input-small" style="cursor: pointer;border: 1px dashed #ddd;"  title="点击刷新" onclick="refresh_captcha(this)"/>
{{ form.captcha(id="input-captcha", class="input-small", required='required', placeholder='输入验证码') }}
{{ error(form.errors['captcha']) }}
{% endmacro %}


{% macro current_price(customers) %}
{{ '%0.2f' % (130/customers + 5)|float if customers > 1 else 130|float}}
{% endmacro %}

{% macro send_date(time_range, customers) %}
{% if time_range == 0 %}
2013/11/25寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 1 %}
2013/12/02寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 2 %}
2013/12/09寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 3 %}
2013/12/16寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 4 %}
2013/12/23寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 5 %}
2013/12/30寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 6 %}
2014/01/06寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 7 %}
2014/01/13寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 8 %}
2014/01/20寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% elif time_range == 9 %}
2014/01/27寄送 已有{{ customers }}人{{ current_price(customers+1) }}元
{% else %}
{% endif %}
{% endmacro %}

{% macro date(time_range) %}
{% if time_range == 0 %}
2013/11/25
{% elif time_range == 1 %}
2013/12/02
{% elif time_range == 2 %}
2013/12/09
{% elif time_range == 3 %}
2013/12/16
{% elif time_range == 4 %}
2013/12/23
{% elif time_range == 5 %}
2013/12/30
{% elif time_range == 6 %}
2014/01/06
{% elif time_range == 7 %}
2014/01/13
{% elif time_range == 8 %}
2014/01/20
{% elif time_range == 9 %}
2014/01/27
{% else %}
{% endif %}
{% endmacro %}